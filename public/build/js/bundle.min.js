const configdatatables={paging:!0,lengthChange:!0,searching:!0,ordering:!0,info:!0,autoWidth:!0,responsive:!0,deferRender:!0,retrieve:!0,processing:!0,language:{search:"Busqueda",emptyTable:"No Hay datos disponibles",zeroRecords:"No se encontraron registros coincidentes",lengthMenu:"_MENU_ Entradas por pagina",info:"Mostrando pagina _PAGE_ de _PAGES_",infoEmpty:"No hay entradas a mostrar",infoFiltered:" (filtrado desde _MAX_ registros)",paginate:{first:"<<",last:">>",next:">",previous:"<"}}};function msjAlert(e,t,a){a.insertAdjacentHTML("beforeend",`<div class="alerta alerta__${e}">\n      <p><i class="fa-solid fa-circle-exclamation"></i> ${t}</p></div>`)}function msjalertToast(e,t,a){Swal.fire({icon:e,title:t,text:a,toast:!0,position:"top-end",showConfirmButton:!1,timer:2700})}if((borrarMsjAlert=()=>{const e=document.querySelector("#divmsjalerta");document.querySelector(".alerta")&&setTimeout(()=>{for(;e.firstChild;)e.removeChild(e.firstChild)},5e3)})(),document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let a=t.target.value.slice(0,e.dataset.num);t.target.value=a,e.textContent=0}})}),document.querySelector(".barraprogreso")){const e=document.querySelectorAll("#negocio"),t=document.querySelector(".barraprogreso__label"),a=document.querySelector(".barraprogreso__barra");let o=0;e.forEach(e=>{e.value&&o++}),a.classList.add("animation"),t.textContent=(100*o/11).toFixed(1)+"%";document.querySelector(".animation").style.width=t.textContent}if(document.querySelector("#tabulacion")){const e=document.querySelector('#tabulacion input[type="radio"]:checked').nextElementSibling;document.querySelector("."+e.id).classList.add("mostrarseccion");const t=document.querySelectorAll(".tabs span"),a=document.querySelectorAll(".paginas");t.forEach(e=>{e.addEventListener("click",e=>{a.forEach(e=>e.classList.remove("mostrarseccion")),document.querySelector("."+e.target.id).classList.add("mostrarseccion")})})}function borrarhtml(e){for(horasdisponibles=[];e.firstElementChild;)e.removeChild(e.firstElementChild)}const serviciosGlobal=async()=>{try{const e="/admin/api/getservices",t=await fetch(e);return await t.json()}catch(e){console.log(e)}};if(document.querySelector(".btnrotated")){const e=document.querySelectorAll("#arrow");document.querySelectorAll(".btnrotated").forEach((t,a)=>{t.addEventListener("click",t=>{e[a].classList.toggle("rotated");const o=document.querySelector(`DIV[data-switch="${t.target.dataset.switch}"]`);o&&o.classList.toggle("showacordeon")})})}function scrolnav(){document.querySelectorAll(".dashboard__menu a").forEach((function(e){if(e.classList.contains("dashboard__enlace--actual")){document.querySelector("."+e.firstElementChild.nextElementSibling.textContent).scrollIntoView({behavior:"smooth"})}}))}!function(){if(document.querySelector(".clientes")){const a=document.querySelector("#crearcliente"),o=document.querySelectorAll("#editar"),r=document.querySelectorAll("#hab_desh");let n={titulo:"",url:"",submit:"",nombre:"",apellido:"",movil:"",email:""};function e(e,t){let{titulo:a,url:o,submit:r,nombre:n,apellido:i,movil:l,email:c,password:s}=e;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:a,html:`<form class="formulario modalform" action="${o}" method="POST">\n                            <input type="hidden" name="id" value="${t}" >\n\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="nombre">Nombre:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Nombre del cliente" id="nombre" name="nombre" value="${n}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="apellido">Apellido:</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="text" placeholder="Apellido del cliente" id="apellido" name="apellido" value="${i}" required>\n                                    <label data-num="42" class="count-charts" for="">42</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="movil">Movil</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="number" placeholder="Movil del cliente" id="movil" name="movil" value="${l}" required>\n                                    <label data-num="10" class="count-charts" for="">10</label>\n                                </div>\n                            </div>\n                            <div class="formulario__campo">\n                                <label class="formulario__label" for="email">Email</label>\n                                <div class="formulario__dato">\n                                    <input class="formulario__input" type="email" placeholder="Email del cliente" id="email" name="email" value="${c}" required>\n                                    <label data-num="40" class="count-charts" for="">40</label>\n                                </div>\n                            </div>\n                            ${s}\n                            <input class="clientes-btn" type="submit" value="${r}">\n                       </form>`,showCancelButton:!1,showConfirmButton:!1})}function t(){document.querySelectorAll(".count-charts").forEach(e=>{e.textContent=e.dataset.num-e.previousElementSibling.value.length,e.previousElementSibling.addEventListener("input",t=>{if(e.textContent=e.dataset.num-t.target.value.length,e.dataset.num-t.target.value.length<=0){let a=t.target.value.slice(0,e.dataset.num);t.target.value=a,e.textContent=0}})})}a.addEventListener("click",()=>{n.titulo="Crear Cliente Nuevo",n.url="/admin/clientes/crear",n.submit="Crear Cliente",n.nombre="",n.apellido="",n.movil="",n.email="",n.password='<div class="formulario__campo">\n                                    <label class="formulario__label" for="password">Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Password del cliente" id="password" name="password" maxlength="4" oninput="this.value = this.value.replace(/[^0-9]/g, \'\');" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>\n                                <div class="formulario__campo">\n                                    <label class="formulario__label" for="password2">Repetir Password</label>\n                                    <div class="formulario__dato">\n                                        <input class="formulario__input" type="password" placeholder="Repetir Password" id="password2" name="password2" maxlength="4" oninput="this.value = this.value.replace(/[^0-9]/g, \'\');" required>\n                                        <label data-num="12" class="count-charts" for="">12</label>\n                                    </div>\n                                </div>',e(n,0),t()}),o.forEach(a=>{a.addEventListener("click",a=>{n.titulo="Actualizar Cliente",n.url="/admin/clientes/actualizar",n.submit="Actualizar";const o=a.target.parentElement.parentElement.parentElement;n.nombre=o.children[1].textContent,n.apellido=o.children[2].textContent,n.movil=o.children[3].textContent,n.email=o.children[4].textContent,n.password="",e(n,a.target.parentElement.dataset.id),t()})}),r.forEach(e=>{e.addEventListener("click",e=>{let t="Desea bloquear el cliente?";e.target.classList.contains("habilitar")&&(t="Desea habilitar el cliente?");const a=e.target.parentElement.dataset.id;Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},title:t,showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(window.location="/admin/clientes/hab_desh?id="+a)})})})}}(),document.addEventListener("DOMContentLoaded",(function(){scrolnav()})),function(){if(document.querySelector(".empleado")){const t=document.querySelector("#crearempleado"),o=document.getElementById("miDialogoEmpleado"),r=document.getElementById("miDialogoSkills"),n=document.querySelector("#upImage"),i=document.querySelector("#customUpImage"),l=document.querySelector("#imginputfile"),c=document.querySelector("#nombre"),s=document.querySelector("#apellido"),d=document.querySelector("#movil "),u=document.querySelector("#email"),m=document.querySelector("#departamento"),p=document.querySelector("#ciudad"),g=document.querySelector("#direccion"),v=document.querySelector("#perfil");let f,h,y,b=0,S=0;function e(t){t.target!==o&&t.target!==r&&"cancelar"!==t.target.value&&"Actualizar"!==t.target.value||(o.close(),r.close(),document.removeEventListener("click",e))}(async()=>{try{const e="/admin/api/getAllemployee",t=await fetch(e);h=await t.json(),console.log(h)}catch(e){console.log(e)}})(),f=$("#tablaempleados").DataTable(configdatatables),t.addEventListener("click",t=>{S=0,l.src=" ",document.querySelector("#formCrearUpdateEmpleado").reset(),document.querySelector("#modalEmpleado").textContent="Crear empleado",document.querySelector("#btnEditarCrearEmpleado").value="Crear",o.showModal(),document.addEventListener("click",e)}),i.addEventListener("click",()=>n.click()),n.addEventListener("change",(function(){const e=this.files[0];if(e){const t=new FileReader;t.onload=function(){const e=t.result;l.src=e},t.readAsDataURL(e)}})),document.querySelector("#tablaempleados").addEventListener("click",t=>{(t.target.classList.contains("editarEmpleado")||t.target.parentElement.classList.contains("editarEmpleado"))&&function(t){let a=t.target.parentElement.id;"I"===t.target.tagName&&(a=t.target.parentElement.parentElement.id);S=1,document.querySelector("#modalEmpleado").textContent="Actualizar Empleado",document.querySelector("#btnEditarCrearEmpleado").value="Actualizar",y=h.find(e=>e.id==a),l.src="/build/img/"+y.img,c.value=y.nombre,s.value=y.apellido,d.value=y.movil,u.value=y.email,m.value=y.departamento,p.value=y.ciudad,g.value=y.direccion,$("#perfil").val(y.perfil),b=f.row(t.target.closest("tr")).index(),o.showModal(),document.addEventListener("click",e)}(t),(t.target.classList.contains("empleadoSkills")||t.target.parentElement.classList.contains("empleadoSkills"))&&function(t){let a=t.target.parentElement.id;"I"===t.target.tagName&&(a=t.target.parentElement.parentElement.id);document.querySelectorAll('.inputskills input[type="checkbox"]').forEach(e=>{e.checked=!1}),y=h.find(e=>e.id==a);var{idservicios:o}=y;o.forEach(e=>{document.querySelector(`input[data-skillid="${e.idservicio}"]`).checked=!0}),r.showModal(),document.addEventListener("click",e)}(t),(t.target.classList.contains("eliminarEmpleado")||t.target.parentElement.classList.contains("eliminarEmpleado"))&&function(e){let t=e.target.parentElement.id,a=f.page.info();"I"===e.target.tagName&&(t=e.target.parentElement.parentElement.id);b=f.row(e.target.closest("tr")).index(),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar el empleado?",text:"El empleado sera eliminado definitivamente.",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(async()=>{const e=new FormData;e.append("id",t);try{const t="/admin/api/eliminarEmpleado",o=await fetch(t,{method:"POST",body:e}),r=await o.json();void 0!==r.exito?(Swal.fire(r.exito[0],"","success"),f.row(b+a.start).remove().draw(),f.page(a.page).draw("page")):Swal.fire(r.error[0],"","error")}catch(e){console.log(e)}})()})}(t)}),document.querySelector("#formCrearUpdateEmpleado").addEventListener("submit",e=>{if(S){e.preventDefault();var t=y.img,a=f.page.info();if(!l.src.includes(y.img)&&(t=e.target.elements.upImage.files[0])){if("image/png"!==t.type&&"image/jpeg"!==t.type)return void msjAlert("error","No es un formato valido para la foto",document.querySelector("#divmsjalerta1"));if(t.size>55e4)return void msjAlert("error","La imagen no debe superar los 500KB",document.querySelector("#divmsjalerta1"))}(async()=>{const e=new FormData;e.append("idempleado",y.id),e.append("img",t),e.append("nombre",c.value),e.append("apellido",s.value),e.append("movil",d.value),e.append("email",u.value),e.append("departamento",m.value),e.append("ciudad",p.value),e.append("direccion",g.value),e.append("perfil",v.value);try{const t="/admin/api/actualizarEmpleado",o=await fetch(t,{method:"POST",body:e}),r=await o.json();if(void 0!==r.exito){msjalertToast("success","¡Éxito!",r.exito[0]);const e=f.row(b+=a.start).data();e[1]=c.value+" "+s.value,e[2]=`<div class="text-center"><img style="width: 40px;" src="/build/img/${r.rutaimg[0]}" alt=""></div>`,e[3]=d.value,e[4]=u.value,e[5]=" ",e[6]=1==v.value?"Empleado":2==v.value?"Admin":"Propietario",f.row(b).data(e).draw(),f.page(a.page).draw("page")}else msjalertToast("error","¡Error!",r.exito[0])}catch(e){console.log(e)}})()}}),document.querySelector("#formSkills").addEventListener("submit",e=>{e.preventDefault();var t=[];document.querySelectorAll('.inputskills input[type="checkbox"]').forEach(e=>{e.checked&&(t=[...t,e.value])}),(async()=>{const e=new FormData;e.append("idempleado",y.id),e.append("idservicio",t);try{const o="/admin/api/actualizarSkillsEmpleado",r=await fetch(o,{method:"POST",body:e}),n=await r.json();void 0!==n.exito?(msjalertToast("success","¡Éxito!",n.exito[0]),h.forEach(e=>{if(e.id==y.id)for(a=0;a<t.length;a++)e.idservicios=[...e.idservicios,{idempleado:y.id,idservicio:t[a]}]})):msjalertToast("error","¡Error!",n.exito[0])}catch(e){console.log(e)}})()})}}(),function(){if(document.querySelector("#servicios-grafica")){let e,t,a,o,r,n=0;citas100=0,progreso=440,(async()=>{try{const i="/admin/api/alldays",l=await fetch(i),c=await l.json(),s="/admin/api/totalcitas",d=await fetch(s),u=await d.json();c.reverse(),e=c.map(e=>e.fecha),t=c.map(e=>e.totaldia),r=u.filter(e=>"Cancelado"===e.estado),a=u.length-r.length,o=u.filter(e=>"Finalizada"===e.estado),n=o.reduce((e,t)=>e+parseInt(t.facturacion.total),0),a&&(citas100=100*o.length/a),progreso=440*citas100/100,function(){const a=document.getElementById("servicios-grafica").getContext("2d");new Chart(a,{type:"line",data:{labels:e,datasets:[{label:"# of Votes",data:t,borderColor:"#00c8c2",backgroundColor:"#ea580c"}]},options:{scales:{y:{beginAtZero:!0}},plugins:{legend:{display:!1}}}})}(),function(){const e=document.querySelector("circle");e.style.strokeDashoffset=440-progreso,e.classList.add("animacion");document.querySelector(".dailyearning").textContent="$"+n;document.querySelector(".rueda .numero").textContent=Math.round(citas100)+"%"}()}catch(e){console.log(e)}})()}}(),function(){if(document.querySelector(".headerapp__menu")){const e=document.querySelector("#btnmenu"),t=document.querySelector(".headerapp__navmenu");e.addEventListener("click",()=>{t.classList.toggle("mostrar")})}}(),function(){if(document.querySelector(".reportes")){const t=document.querySelectorAll(".reportes__btn"),a=document.getElementById("miDialogo");function e(t){console.log(t.target),t.target===a&&(a.close(),document.removeEventListener("click",e))}t.forEach(t=>{t.addEventListener("click",()=>{a.showModal(),document.addEventListener("click",e)})})}}(),function(){document.querySelectorAll(".dia input[type=checkbox]").forEach(e=>{e.addEventListener("change",(function(e){if(this.checked)for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!1;else for(let t=0;t<4;t++)e.target.parentElement.nextElementSibling.children[t].disabled=!0}))});document.querySelectorAll("#entrada").forEach(e=>{e.addEventListener("change",e=>{!function e(t,a){for(;t.firstChild;)t.removeChild(t.firstChild);let o=a.target.value.split(":"),r=parseInt(o[0]+o[1]);for(let e=0;r<2300;e++){let e=document.createElement("OPTION");r+=30,r%100==60&&(r+=40),e.value=r,o[0]=parseInt(r/100),o[1]=r%100,0===o[1]&&(o[1]="00"),e.textContent=o[0]+":"+o[1],t.appendChild(e)}t.addEventListener("change",t=>{let a=t.target.nextElementSibling;a&&e(a,t)})}(e.target.nextElementSibling,e)})})}(),function(){if(document.querySelector(".configAdd")){let e=[];const t=document.querySelectorAll('.mediospago__mediopago input[type="checkbox"]'),a=document.querySelector("#btnmediopago");(async()=>{try{const a="/admin/api/getmediospago",o=await fetch(a);!function(a){t.forEach(t=>{const o=a.find(e=>e.id==t.value);"1"===o.estado&&(t.checked=!0,e=[...e,o.id])})}(await o.json())}catch(e){console.log(e)}})(),t.forEach(t=>{t.addEventListener("change",t=>{e=t.target.checked?[...e,t.target.value]:e.filter(e=>e!=t.target.value)})}),a.addEventListener("click",()=>{(async()=>{const t=new FormData;t.append("ids",e);try{const e="/admin/api/setmediospago",a=await fetch(e,{method:"POST",body:t});await a.json()?msjalertToast("success","¡Éxito!","Medios de pago actualizados"):msjalertToast("error","¡Error!","Se produjo un error intentalo nuevamente")}catch(e){console.log(e)}})()});document.querySelector("#formcolores").addEventListener("submit",e=>{e.preventDefault();const t=document.querySelector(".coloresapp #principal").value,a=document.querySelector(".coloresapp #secundario").value;(async()=>{const e=new FormData;e.append("colorprincipal",t),e.append("colorsecundario",a);try{const t="/admin/api/coloresapp",a=await fetch(t,{method:"POST",body:e});await a.json()?msjalertToast("success","¡Éxito!","Colores establecidos correctamente"):msjalertToast("error","¡Error!","Error al establecer los colores intentalonuevamnete")}catch(e){console.log(e)}})()}),(async()=>{try{const e="/admin/api/gettimeservice",t=await fetch(e);!function(e){const t=document.querySelector("#selecttime");for(let a=1;a<=t.options.length;a++)if(t.options[a].value==e){t.options[a].selected=!0;break}}(await t.json())}catch(e){console.log(e)}})();document.querySelector("#formtimeserv").addEventListener("submit",e=>{e.preventDefault();const t=document.querySelector("#selecttime"),a=t.options[t.options.selectedIndex].value,o=new FormData;o.append("timeservice",a),(async()=>{try{const e="/admin/api/tiemposervicio",t=await fetch(e,{method:"POST",body:o}),a=await t.json();console.log(a),a?msjalertToast("success","¡Éxito!","Tiempo del servicio establecido"):msjalertToast("success","¡Error!","Se produjo un error intentalo nuevamente")}catch(e){console.log(e)}})()})}}(),function(){if(document.querySelector(".editarservicios")){$("#idcategoriaS").select2(),$("#updateCategoria").select2({dropdownParent:$("#miDialogoServicio")});const t=document.getElementById("miDialogoServicio"),a=document.getElementById("miDialogoQuestionService"),o=document.querySelectorAll(".card-description"),r=document.querySelector("#formUpdateServicio");new List("hacker-list",{valueNames:["card-title","card-category"]});function e(o){const r=o.target;var n,i;(o.target===a||o.target==t||r.closest(".editarservicio")||r.closest(".eliminarservicio")||"cancelar"===o.target.value||"Actualizar"===o.target.value)&&(a.close(),t.close(),document.removeEventListener("click",e),r.closest(".editarservicio")&&(n=r.closest(".editarservicio").parentElement.id,i=document.querySelector(`.card-description[id="${n}"]`),document.querySelector("#updateid").value=n,$("#updateCategoria").val(i.dataset.categoria).trigger("change"),document.querySelector("#updatenombre").value=i.querySelector(".card-title").textContent,$("#updateprecio").val(i.querySelector(".card-price").textContent.replace(".","").slice(1)),t.showModal(),document.addEventListener("click",e)),r.closest(".eliminarservicio")&&function(e){Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar el servicio?",text:"El servicio sera elminado y las citas deben reprogramarse!",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(t=>{t.isConfirmed&&(async()=>{const t=new FormData;t.append("id",e);try{const a="/admin/api/eliminarservicio",o=await fetch(a,{method:"POST",body:t}),r=await o.json();if(void 0!==r.exito){Swal.fire(r.exito[0],"","success");document.querySelector(`.card-description[id="${e}"]`).parentElement.remove()}else Swal.fire(r.error[0],"","error")}catch(e){console.log(e)}})()})}(r.closest(".eliminarservicio").parentElement.id))}o.forEach(t=>{t.addEventListener("click",()=>{a.children[0].children[0].textContent=t.querySelector(".card-price").textContent,a.children[0].children[1].textContent=t.querySelector(".card-title").textContent,a.children[0].children[2].textContent=t.querySelector(".updatedate").textContent,a.children[1].id=t.id,a.showModal(),document.addEventListener("click",e)})}),r.addEventListener("submit",e=>{e.preventDefault();const t=$("#updateid").val();console.log(t),(async()=>{const e=new FormData;e.append("id",t),e.append("idcategoriaS",$("#updateCategoria").val()),e.append("nombre",$("#updatenombre").val()),e.append("precio",$("#updateprecio").val());try{const o="/admin/api/actualizarServicio",r=await fetch(o,{method:"POST",body:e}),n=await r.json();if(void 0!==n.exito){var a=document.querySelector(`.card-description[id="${t}"]`);a.querySelector(".card-title").textContent=$("#updatenombre").val(),a.querySelector(".card-price").textContent="$"+Number($("#updateprecio").val()).toLocaleString(),msjalertToast("success","¡Éxito!",n.exito[0])}else msjalertToast("error","¡Error!",n.error[0])}catch(e){console.log(e)}})()})}}(),function(){if(document.querySelector(".servicios")){const t=document.querySelector("#crearCategoria"),a=document.getElementById("miDialogoCategoria"),o=document.querySelectorAll(".icono-categoria"),r=document.querySelector("#formCrearUpdateCategoria"),n=document.querySelector("#inputnombreCT"),i=document.querySelector("#inputimagenCT");let l,c=0,s=0,d=0;function e(t){t.target!==a&&"cancelar"!==t.target.value||(a.close(),document.removeEventListener("click",e))}l=$("#tablacategorias").DataTable(configdatatables),o.forEach(e=>{e.addEventListener("click",e=>{const t=document.querySelector(".resaltar-icono");t&&t.classList.remove("resaltar-icono"),e.target.parentElement.classList.add("resaltar-icono");var a=e.target.alt;"DIV"==e.target.tagName&&(a=e.target.firstElementChild.alt),document.querySelector("#inputimagenCT").value=a+".png",document.querySelector("#btnEnviarCrearCategoria").focus()})}),t.addEventListener("click",t=>{s=0;const o=document.querySelector(".resaltar-icono");o&&o.classList.remove("resaltar-icono"),document.querySelector("#formCrearUpdateCategoria").reset(),a.showModal(),document.addEventListener("click",e)}),document.querySelector("#tablacategorias").addEventListener("click",t=>{t.target.classList.contains("stateCategoria")&&function(e){const t=e.target,a=l.page.info();c=l.row(t.closest("tr")).index(),(async()=>{const e=new FormData;e.append("id",t.id),e.append("estado",0==t.dataset.state?1:0);try{const o="/admin/api/updateStateCategoria",r=await fetch(o,{method:"POST",body:e});if(await r.json()){const e=`<button id="${t.id}" data-state="${0==t.dataset.state?1:0}" class="btn-md ${0==t.dataset.state?"btn-green":"btn-red"} stateCategoria">${0==t.dataset.state?"Activo":"Inactivo"}</button>`;l.cell(l.row(c+=a.start),5).data(e).draw(),l.page(a.page).draw("page")}}catch(e){console.log(e)}})()}(t),(t.target.classList.contains("editarCategoria")||t.target.parentElement.classList.contains("editarCategoria"))&&function(t){let o=t.target.parentElement;"I"===t.target.tagName&&(o=t.target.parentElement.parentElement);const r=document.querySelector(".resaltar-icono");r&&r.classList.remove("resaltar-icono");Array.from(document.querySelectorAll(".icono-categoria")).some(e=>{if(e.firstElementChild.alt==o.dataset.img.replace(".png",""))return e.classList.add("resaltar-icono"),!0}),d=o.id,n.value=o.dataset.nombre,i.value=o.dataset.img,s=1,a.showModal(),c=l.row(t.target.closest("tr")).index(),document.addEventListener("click",e)}(t),(t.target.classList.contains("eliminarCategoria")||t.target.parentElement.classList.contains("eliminarCategoria"))&&function(e){let t=e.target.parentElement.id;"I"===e.target.tagName&&(t=e.target.parentElement.parentElement.id);const a=l.page.info();c=l.row(e.target.closest("tr")).index(),Swal.fire({customClass:{confirmButton:"sweetbtnconfirm",cancelButton:"sweetbtncancel"},icon:"question",title:"Desea eliminar la categoria?",text:"Todos los servicios asociados a la categoria se eliminaran!",showCancelButton:!0,confirmButtonText:"Si",cancelButtonText:"No"}).then(e=>{e.isConfirmed&&(async()=>{const e=new FormData;e.append("id",t);try{const t="/admin/api/eliminarCategoria",o=await fetch(t,{method:"POST",body:e}),r=await o.json();void 0!==r.exito?(l.row(c+a.start).remove().draw(),l.page(a.page).draw("page"),Swal.fire(r.exito[0],"","success")):Swal.fire(r.error[0],"","error")}catch(e){console.log(e)}})()})}(t)}),r.addEventListener("submit",e=>{if(e.preventDefault(),!document.querySelector(".resaltar-icono"))return msjAlert("error","Debe seleccionar una imagen para la categoria",document.querySelector("#divmsjalerta1")),void borrarMsjAlert();s?function(){const e=l.page.info();(async()=>{const t=new FormData;t.append("id",d),t.append("nombre",n.value),t.append("imagen",i.value);try{const o="/admin/api/actualizarCategoria",r=await fetch(o,{method:"POST",body:t}),s=await r.json();if(void 0!==s.exito){const t=l.row(c+=e.start).data();t[2]=n.value,t[3]=`<div class="text-center"><img style="width: 40px;" src="/build/img/iconos_categoria/${i.value}"></div>`,t[7]=`<div class="acciones-btns" id="${d}" data-nombre="${n.value}" data-img="${i.value}">\n                                                        <button class="btn-md btn-turquoise editarCategoria"><i class="fa-solid fa-pen-to-square"></i></button><button class="btn-md btn-green editarServicios"><i class="fa-solid fa-grip-vertical"></i></button><button class="btn-md btn-red eliminarCategoria"><i class="fa-solid fa-trash-can"></i></button>\n                                                      </div>`,l.row(c).data(t).draw(),l.page(e.page).draw("page"),a.close(),msjalertToast("success","¡Éxito!",s.exito[0])}else msjalertToast("error","¡Error!",s.error[0])}catch(e){console.log(e)}})()}():e.target.submit()})}}();
//# sourceMappingURL=bundle.js.map
